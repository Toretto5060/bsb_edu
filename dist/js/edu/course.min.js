function page(e){var a=[];if(e[0])if(e[0].keypoinsts.length<=5){if(a.push({name:e[0].name,keypoinsts:e[0].keypoinsts}),!e[1])return pageBox.push(a),void(a=[]);if(e[1].keypoinsts.length<=5)a.push({name:e[1].name,keypoinsts:e[1].keypoinsts}),pageBox.push(a),a=[],e.splice(0,2),page(e);else if(e[1].keypoinsts.length>5){a.push({name:e[1].name,keypoinsts:e[1].keypoinsts.slice(0,5)}),pageBox.push(a),a=[];var s={name:e[1].name,keypoinsts:e[1].keypoinsts.slice(5,e[1].keypoinsts.length)};e.splice(0,2),e.unshift(s),page(e)}}else if(e[0].keypoinsts.length<=10)a.push({name:e[0].name,keypoinsts:e[0].keypoinsts.slice(0,5)},{name:e[0].name,keypoinsts:e[0].keypoinsts.slice(5,e[0].keypoinsts.length)}),pageBox.push(a),a=[],e.shift(),page(e);else if(e[0].keypoinsts.length>10){a.push({name:e[0].name,keypoinsts:e[0].keypoinsts.slice(0,5)}),a.push({name:e[0].name,keypoinsts:e[0].keypoinsts.slice(5,10)}),pageBox.push(a),a=[];s={name:e[0].name,keypoinsts:e[0].keypoinsts.slice(10,e[0].keypoinsts.length)};e.splice(0,1),e.unshift(s),page(e)}}function dataDispose(e,a){for(var s=[],t=0;t<e.length;t++)if(e[t].keypoinsts.length)for(var l=0;l<e[t].keypoinsts.length;l++)s.push(e[t].keypoinsts[l]);totalPage=Math.ceil(s.length/10);for(var i=[],n=0;n<Math.ceil(s.length/10);n++){var d=10*n,o=d+10;i.push(s.slice(d,o))}return i[a]}function init_1(){$(".mainCourseL").html('<div class="listLeft"><p class="titleLeft"></p><ul class="titleNameLf" data-num = 0></ul></div><div class="listRight"><p class="titleRight"></p><ul class="titleNameRt" data-num = 1></ul></div><ul class="footer"><li class="prevPage"><p class="pages">上一页</p><p class="bgOpa" style="filter:alpha(opacity=20)"></p><p class="bgFocus"></p><p class="border"></p></li><li class="pageInformation"><span>第</span><span class="currentPage"></span><span>/</span><span class="lastPage"></span><span>页</span></li><li class="nextPage"><p class="pages">下一页</p><p class="bgOpa" style="filter:alpha(opacity=20)"></p><p class="bgFocus"></p><p class="border"></p></li></ul>')}function init_2(){$(".mainCourseL").html('<div class="navList"><ul class="classes"></ul><ul class="footer"><li class="prevPage"><p class="pages">上一页</p><p class="bgOpa" style="filter:alpha(opacity=20)"></p><p class="bgFocus"></p><p class="border"></p></li><li class="pageInformation"><span>第</span><span class="currentPage"></span><span>/</span><span class="lastPage"></span><span>页</span></li><li class="nextPage"><p class="pages">下一页</p><p class="bgOpa" style="filter:alpha(opacity=20)"></p><p class="bgFocus"></p><p class="border"></p></li></ul></div>')}function render_1(e,a){for(var s=0,t="";s<pageBox[e][0].keypoinsts.length;s++)t+=0==s?'<li class="active" data-num="'+s+'" data-index="'+s+'"><span class="character">'+pageBox[e][0].keypoinsts[s].name+'</span><div style="filter:alpha(opacity=20)" class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>':'<li data-num="'+s+'" data-index="'+s+'"><span class="character">'+pageBox[e][0].keypoinsts[s].name+'</span><div style="filter:alpha(opacity=20)" class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>',$(".titleLeft").html(pageBox[e][0].name);if($(".titleNameLf").html(t),pageBox[e][1]){s=0;for(var l="";s<pageBox[e][1].keypoinsts.length;s++)l+='<li data-num = "'+s+'" data-index="'+(s+$(".titleNameLf li").elements.length)+'"><span class="character">'+pageBox[e][1].keypoinsts[s].name+'</span><div style="filter:alpha(opacity=20)" class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>',$(".titleRight").html(pageBox[e][1].name);$(".titleNameRt").html(l)}else $(".titleRight").html(""),$(".titleNameRt").html("");if(pageTotal=pageBox.length,$(".lastPage").html(pageTotal),0==a&&window.location.href.indexOf("webAddress")>0){var i=window.location.href.split("webAddress=")[1],n=Number(i.split("&")[0]),d=Number(i.split("&")[1]);if(currentPa=Number(i.split("&")[2]),$(".currentPage").html(currentPa),0==d){var o=$(".titleNameLf li").elements;$(".active").elements[0].className="",o[n].className="active"}else{var r=$(".titleNameRt li").elements;$(".active").elements[0].className="",r[n].className="active"}}window.location.href.indexOf("webAddress")>0?$(".currentPage").html(currentPa):$(".currentPage").html(pageNo+1);var c=$(".currentPage").html(),m=$(".lastPage").html();parseInt(m)<=1||parseInt(c)==parseInt(m)?$(".nextPage .bgFocus").elements[0].className="bgFocus":$(".nextPage .bgFocus").elements[0].className="bgFocus selectAble",1==parseInt(c)||0==parseInt(m)?$(".prevPage .bgFocus").elements[0].className="bgFocus":$(".prevPage .bgFocus").elements[0].className="bgFocus selectAble"}function render_2(e){for(var a=0,s="";a<dispose.length;a++)s+=0==a?'<li class="active" data-num="'+a+'"><div class="character">'+dispose[a].name+'</div><div class="bottCor"></div><div class="border"></div></li>':'<li data-num="'+a+'"><div class="character">'+dispose[a].name+'</div><div class="bottCor"></div><div class="border"></div></li>';if($(".classes").html(s),$(".lastPage").html(totalPage),0==e&&window.location.href.indexOf("webAddress")>0){var t=window.location.href.split("webAddress=")[1],l=Number(t.split("&")[0]);currentPa=Number(t.split("&")[1]),classesEle=$(".classes li").elements,$(".currentPage").html(currentPa),$(".active").elements[0].className="",classesEle[l].className="active"}window.location.href.indexOf("webAddress")>0?$(".currentPage").html(currentPa):$(".currentPage").html(pageNo+1);var i=$(".currentPage").html(),n=$(".lastPage").html();parseInt(n)<=1||parseInt(i)==parseInt(n)?$(".nextPage .bgFocus").elements[0].className="bgFocus":$(".nextPage .bgFocus").elements[0].className="bgFocus selectAble",1==parseInt(i)||0==parseInt(n)?$(".prevPage .bgFocus").elements[0].className="bgFocus":$(".prevPage .bgFocus").elements[0].className="bgFocus selectAble"}function topKeyDown(){if(1==subject_id||3==subject_id){if($(".classes li.active").elements.length>0){var e=$(".classes li").elements;(i=Number($(".active").attr("data-num")))>1?(e[i].className="",e[i-2].className="active"):0!=i&&1!=i||(e[i].className="",$(".logout").elements[0].className="logout focus")}else if($(".footer p.active").elements.length>0){(e=$(".classes li").elements)[$(".classes li").elements.length-1].className="active",$(".footer .active").hide(),$(".footer .active").elements[0].className="border"}}else if($(".titleNameLf .active").elements.length>0||$(".titleNameRt .active").elements.length>0){e=$(".active").elements[0].parentNode.childNodes;(i=Number($(".active").attr("data-num")))>0?(e[i].className="",e[i-1].className="active"):0==i&&(e[i].className="",$(".logout").elements[0].className="logout focus")}else if($(".footer p.active").elements.length>0){var a=$(".titleNameRt li").elements,s=$(".titleNameLf li").elements,t=$(".titleNameRt li").elements.length,l=$(".titleNameLf li").elements.length;t>0?a[t-1].className="active":s[l-1].className="active",$(".footer .active").hide(),$(".footer .active").elements[0].className="border"}if($("#videoContent li.dialogActive").elements.length>0){var i=Number($(".dialogActive").attr("data-num")),n=$("#videoContent li").elements,d=$("#videoContent li").elements.length,o=parseInt($("#videoContent").elements[0].offsetTop);if(0!=i&&(n[i].className="",n[i-1].className="dialogActive"),d>4&&o<0){var r=o+77;$("#videoContent").css("top",r+"px")}}}function downKeyDown(){if(1==subject_id||3==subject_id)if($(".classes li.active").elements.length>0){var e=$(".classes li").elements;(a=Number($(".active").attr("data-num")))<e.length-2?(e[a].className="",e[a+2].className="active"):a!=e.length-1&&a!=e.length-2||(e[a].className="",$(".prevPage .border").elements[0].className="border active",$(".prevPage .border").show())}else $(".head .focus").elements.length>0&&($(".logout").elements[0].className="logout normal",$(".classes li").elements[0].className="active");else if($(".titleNameLf .active").elements.length>0||$(".titleNameRt .active").elements.length>0){e=$(".active").elements[0].parentNode.childNodes;(a=Number($(".active").attr("data-num")))<e.length-1?(e[a].className="",e[a+1].className="active"):a==e.length-1&&(e[a].className="",$(".prevPage .border").elements[0].className="border active",$(".prevPage .border").show())}else $(".head .focus").elements.length>0&&($(".logout").elements[0].className="logout normal",$(".titleNameLf li").elements[0].className="active");if($("#videoContent li.dialogActive").elements.length>0){var a=Number($(".dialogActive").attr("data-num")),s=$("#videoContent li").elements,t=$("#videoContent li").elements.length,l=parseInt($("#videoContent").elements[0].offsetTop);if(a!=s.length-1&&(s[a].className="",s[a+1].className="dialogActive"),t>4&&l>-77*(t-4)){var i=l-77;$("#videoContent").css("top",i+"px")}else t>4&&l==-77*(t-4)&&$("#videoContent").css("top",-77*(t-4)+"px")}}function leftKeyDown(){if(1==subject_id||3==subject_id){if($(".classes li.active").elements.length>0){var e=$(".classes li").elements;(s=Number($(".active").attr("data-num")))%2!=0&&(e[s].className="",e[s-1].className="active")}}else if($(".titleNameRt .active").elements.length>0){e=$(".active").elements[0].parentNode.childNodes;var a=$(".titleNameLf li").elements,s=Number($(".active").attr("data-num"));a.length>s&&(e[s].className="",a[s].className="active")}$(".nextPage p.active").elements.length>0&&($(".nextPage .border").hide(),$(".nextPage .border").elements[0].className="border",$(".prevPage .border").show(),$(".prevPage .border").elements[0].className="border active")}function rightKeyDown(){if(1==subject_id||3==subject_id){if($(".classes li.active").elements.length>0){var e=$(".classes li").elements;(s=Number($(".active").attr("data-num")))%2==0&&s!=e.length-1&&(e[s].className="",e[s+1].className="active")}}else if($(".titleNameLf .active").elements.length>0){e=$(".active").elements[0].parentNode.childNodes;var a=$(".titleNameRt li").elements,s=Number($(".active").attr("data-num"));a.length>s&&(e[s].className="",a[s].className="active")}$(".prevPage p.active").elements.length>0&&($(".prevPage .border").hide(),$(".prevPage .border").elements[0].className="border",$(".nextPage .border").show(),$(".nextPage .border").elements[0].className="border active")}function enterKeyDown(){if(1==subject_id||3==subject_id){if($(".nextPage .selectAble").elements.length>0&&$(".nextPage .active").elements.length>0){var e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<a&&($(".term").html(""),currentPa++,dispose=dataDispose(datas,currentPa-1),render_2(),$(".classes li").elements[0].className=""):e<a&&($(".term").html(""),pageNo++,dispose=dataDispose(datas,pageNo),render_2(),$(".classes li").elements[0].className="")}else if($(".prevPage .selectAble").elements.length>0&&$(".prevPage .active").elements.length>0){e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<=a&&e>0&&($(".term").html(""),currentPa--,dispose=dataDispose(datas,currentPa-1),render_2(),$(".classes li").elements[0].className=""):e<=a&&e>0&&($(".term").html(""),pageNo--,dispose=dataDispose(datas,pageNo),render_2(),$(".classes li").elements[0].className="")}else if($(".dialogNone").hasClass("display")){var s=$(".classes li").elements;$(".dialogNone").elements[0].className="dialogNone",s[dataNum].className="active"}else if($(".classes .active").elements.length>0){dataNum=Number($(".active").attr("data-num"));var t=$(".currentPage").html()-1;if(dispose=dataDispose(datas,t),activeS=$(".active").attr("data-num"),currentP=$(".currentPage").html(),window.location.href.indexOf("webAddress")>0){var l=(w=window.location.href.split("html/")[1]).split("=")[9];webAddress=w.replace(l,activeS+"&"+currentP)}else webAddress=window.location.href.split("html/")[1]+"&webAddress="+activeS+"&"+currentP;if(0==dispose[dataNum].video_mains.length)$(".active").elements[0].className="",$(".dialogNone").elements[0].className="dialogNone display";else{$(".active").elements[0].className="",$(".dialogVideo").elements[0].className="dialogVideo display";for(var i=0,n="";i<dispose[dataNum].video_mains.length;i++){var d="";d=1==dispose[dataNum].video_mains[i].grade_id?"(免费)"+dispose[dataNum].video_mains[i].video_title:dispose[dataNum].video_mains[i].video_title,n+=0==i?'<li data-gradeid="'+dispose[dataNum].video_mains[i].grade_id+'" class="dialogActive" data-num="'+i+'" data-videoid="'+dispose[dataNum].video_mains[i].video_id+'-7" data-videosrc="'+dispose[dataNum].video_mains[i].video_path+'"><p class="videoTitle">'+d+'</p><p class="videoTle"><span class="videoTeacher">'+dispose[dataNum].video_mains[i].teacher_name+'老师</span><span class="videoSchool">'+dispose[dataNum].video_mains[i].school_name+'</span></p><div class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>':'<li data-gradeid="'+dispose[dataNum].video_mains[i].grade_id+'" data-num="'+i+'" data-videoid="'+dispose[dataNum].video_mains[i].video_id+'-7" data-videosrc="'+dispose[dataNum].video_mains[i].video_path+'"><p class="videoTitle">'+d+'</p><p class="videoTle"><span class="videoTeacher">'+dispose[dataNum].video_mains[i].teacher_name+'老师</span><span class="videoSchool">'+dispose[dataNum].video_mains[i].school_name+'</span></p><div class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>'}$("#videoContent").html(n)}}else if($("#videoContent li.dialogActive").elements.length>0){var o=$(".dialogActive").attr("data-videoid"),r=$(".dialogActive").attr("data-videosrc"),c=Number($(".dialogActive").attr("data-gradeid")),m="",p="";switch(active){case 17:var g="grade_school";m="70016",p="800700000167";break;case 18:g="middle_school";m="70017",p="800700000168";break;case 19:g="high_school";m="70018",p="800700000169"}c?(window.location.href="./media.html?video="+r+"&"+webAddress,videoRecord(o,g)):authentic({url:r,aaaCode:m,bossCode:p},webAddress,111,o,g);s=$(".classes li").elements;$(".dialogActive").elements[0].className="",$(".dialogVideo").elements[0].className="dialogVideo",s[dataNum].className="active"}}else if($(".nextPage .selectAble").elements.length>0&&$(".nextPage .active").elements.length>0){e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<=a&&e>0&&($(".term").html(""),currentPa++,render_1(currentPa-1),$(".titleNameLf li").elements[0].className=""):e<=a&&e>0&&($(".term").html(""),render_1(++pageNo),$(".titleNameLf li").elements[0].className="")}else if($(".prevPage .selectAble").elements.length>0&&$(".prevPage .active").elements.length>0){e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<=a&&($(".term").html(""),currentPa--,render_1(currentPa-1),$(".titleNameLf li").elements[0].className=""):e<=a&&($(".term").html(""),render_1(--pageNo),$(".titleNameLf li").elements[0].className="")}else if($(".dialogNone").hasClass("display")){s=$(".mainCourseL li").elements;$(".dialogNone").elements[0].className="dialogNone",s[liNum].className="active"}else if($(".titleNameLf .active").elements.length>0||$(".titleNameRt .active").elements.length>0){page(datas),liNum=$(".active").attr("data-index");t=$(".currentPage").html()-1;var v=parseInt($(".lastPage").html()),h=$(".active").attr("data-num"),u=$(".active").elements[0].parentNode.getAttribute("data-num"),N=pageBox.slice(0,v)[t][u].keypoinsts[h],f=$(".active").attr("data-num"),b=$(".currentPage").html(),_=$(".active").elements[0].parentNode.getAttribute("data-num");if(window.location.href.indexOf("webAddress")>0){var w;l=(w=window.location.href.split("html/")[1]).split("=")[9];webAddress=w.replace(l,f+"&"+_+"&"+b)}else webAddress=window.location.href.split("html/")[1]+"&webAddress="+f+"&"+_+"&"+b;if(0==N.video_mains.length)$(".active").elements[0].className="",$(".dialogNone").elements[0].className="dialogNone display";else{$(".active").elements[0].className="",$(".dialogVideo").elements[0].className="dialogVideo display";var P=0;for(n="";P<N.video_mains.length;P++){d="";d=1==N.video_mains[P].grade_id?"(免费)"+N.video_mains[P].video_title:N.video_mains[P].video_title,n+=0==P?'<li data-gradeid="'+N.video_mains[P].grade_id+'" class="dialogActive" data-num="'+P+'" data-videoid="'+N.video_mains[P].video_id+'-7" data-videosrc="'+N.video_mains[P].video_path+'"><p class="videoTitle">'+d+'</p><p class="videoTle"><span class="videoTeacher">'+N.video_mains[P].teacher_name+'老师</span><span class="videoSchool">'+N.video_mains[P].school_name+'</span></p><div class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>':'<li data-gradeid="'+N.video_mains[P].grade_id+'" data-num="'+P+'" data-videoid="'+N.video_mains[P].video_id+'-7" data-videosrc="'+N.video_mains[P].video_path+'"><p class="videoTitle">'+d+'</p><p class="videoTle"><span class="videoTeacher">'+N.video_mains[P].teacher_name+'老师</span><span class="videoSchool">'+N.video_mains[P].school_name+'</span></p><div class="liBg"></div><div class="bgfocus"></div><div class="border"></div></li>'}$("#videoContent").html(n)}}else if($("#videoContent li.dialogActive").elements.length>0){o=$(".dialogActive").attr("data-videoid"),r=$(".dialogActive").attr("data-videosrc"),c=Number($(".dialogActive").attr("data-gradeid")),m="",p="";switch(active){case 17:g="grade_school";m="70016",p="800700000167";break;case 18:g="middle_school";m="70017",p="800700000168";break;case 19:g="high_school";m="70018",p="800700000169"}c?(window.location.href="./media.html?video="+r+"&"+webAddress,videoRecord(o,g)):authentic({url:r,aaaCode:m,bossCode:p},webAddress,111,o,g);s=$(".mainCourseL li").elements;$(".dialogActive").elements[0].className="",$(".dialogVideo").elements[0].className="dialogVideo",s[liNum].className="active"}$(".head .focus").elements.length>0&&(window.location.href="youngMiddleHigh.html?grade="+grades+"&active="+active+"&focus="+subject_id+"&selectedInx="+selectedInx+"&swiperInx="+swiperInx+"&selectId="+selectID)}function pageUpKeyDown(){if(1==subject_id||3==subject_id){var e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<=a&&e>0&&($(".term").html(""),currentPa--,dispose=dataDispose(datas,currentPa-1),render_2(),$(".classes li").elements[0].className=""):e<=a&&e>0&&($(".term").html(""),pageNo>0&&pageNo--,dispose=dataDispose(datas,pageNo),render_2(),$(".classes li").elements[0].className="")}else{e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<=a&&($(".term").html(""),currentPa--,render_1(currentPa-1),$(".titleNameLf li").elements[0].className=""):e<=a&&($(".term").html(""),pageNo>0&&pageNo--,render_1(pageNo),$(".titleNameLf li").elements[0].className="")}$(".term").html(""),$(".prevPage .border").show(),$(".nextPage .border").hide(),$(".prevPage .border").elements[0].className="border active",$(".nextPage .border").elements[0].className="border"}function pageDownKeyDown(){if(1==subject_id||3==subject_id){var e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<a&&($(".term").html(""),currentPa++,dispose=dataDispose(datas,currentPa-1),render_2(),$(".classes li").elements[0].className=""):e<a&&($(".term").html(""),pageNo++,dispose=dataDispose(datas,pageNo),render_2(),$(".classes li").elements[0].className="")}else{e=parseInt($(".currentPage").html()),a=parseInt($(".lastPage").html());window.location.href.indexOf("webAddress")>0?e<=a&&e>0&&($(".term").html(""),currentPa++,render_1(currentPa-1),$(".titleNameLf li").elements[0].className=""):e<=a&&e>0&&($(".term").html(""),pageNo<a-1&&pageNo++,render_1(pageNo),$(".titleNameLf li").elements[0].className="")}$(".term").html(""),$(".nextPage .border").show(),$(".prevPage .border").hide(),$(".nextPage .border").elements[0].className="border active",$(".prevPage .border").elements[0].className="border"}function escKeyDown(){window.location.href.indexOf("courseList")>-1&&(window.location.href="youngMiddleHigh.html?grade="+grades+"&active="+active+"&focus="+subject_id+"&selectedInx="+selectedInx+"&swiperInx="+swiperInx+"&selectId="+selectID)}var params_arr=location.href.split("?")[1].split("&"),category_id=Number(params_arr[0].split("=")[1]),subject_id=Number(params_arr[1].split("=")[1]),active=Number(params_arr[2].split("=")[1]),grades=Number(params_arr[3].split("=")[1]),term=decodeURI(params_arr[4].split("=")[1]),selectedInx=Number(params_arr[5].split("=")[1]),swiperInx=Number(params_arr[6].split("=")[1]),selectID=Number(params_arr[7].split("=")[1]),pageNo=0,pageTotal=0,totalPage=0,pageBox=[];window.onload=function(){1==subject_id||3==subject_id?init_2():init_1(),ajax({type:"get",url:$edu_url+"/chapter",dataType:"json",data:{category_id:category_id,subject_id:subject_id},success:function(e){if(0==e.status&&($(".logout").elements[0].className="logout focus"),datas=e.data,$(".stage-title").html(datas[0].category_name),1==subject_id||3==subject_id)if(window.location.href.indexOf("webAddress")>0){$(".term").html("");var a=window.location.href.split("webAddress=")[1],s=Number(a.split("&")[1]);dispose=dataDispose(datas,s-1),render_2(0)}else $(".term").html(""),dispose=dataDispose(datas,0),render_2();else if(window.location.href.indexOf("webAddress")>0){$(".term").html("");a=window.location.href.split("webAddress=")[1],s=Number(a.split("&")[2]);page(datas),render_1(s-1,0)}else $(".term").html(""),page(datas),render_1(pageNo)}})};